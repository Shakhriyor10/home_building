{% load static widget_tweaks poll_extras %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MotaAdmin - Bootstrap Admin Dashboard </title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon.png' %}">
    <link href="{% static 'vendor/jqvmap/css/jqvmap.min.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'vendor/chartist/css/chartist.min.css' %}">
    <link type="text-success" href="{% static 'vendor/bootstrap-select/dist/css/bootstrap-select.min.css' %}"
          rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <link href="https://cdn.lineicons.com/2.0/LineIcons.css" rel="stylesheet">
    {% block extra_css %}
    {% endblock %}
</head>
<body>
<!--*******************
    Preloader start
********************-->
<div id="preloader">
    <div class="sk-three-bounce">
        <div class="sk-child sk-bounce1"></div>
        <div class="sk-child sk-bounce1"></div>
        <div class="sk-child sk-bounce2"></div>
        <div class="sk-child sk-bounce3"></div>
    </div>
</div>
<!--*******************
    Preloader end
********************-->

<!--**********************************
    Main wrapper start
***********************************-->
<div id="main-wrapper">

    <!--**********************************
        Nav header start
    ***********************************-->
    <div class="nav-header">
        <a href="{% url 'product' %}" class="brand-logo">
            <img class="logo-abbr" src="{% static 'images/logo-white.png' %}" alt="">
            <img class="logo-compact" src="{% static 'images/logo-text.png' %}" alt="">
            <img class="brand-title" src="{% static 'images/logo-text.png' %}" alt="">
        </a>

        <div class="nav-control">
            <div class="hamburger">
                <span class="line"></span><span class="line"></span><span class="line"></span>
            </div>
        </div>
    </div>
    <!--**********************************
        Nav header end
    ***********************************-->

    <!--**********************************
        Chat box start
    ***********************************-->

    <!--**********************************
        Chat box End
    ***********************************-->

    <!--**********************************
        Sidebar Fixed
    ***********************************-->
    <div class="fixed-content-box">
        <div class="head-name">
            Home Building
            <span class="close-fixed-content fa-left d-lg-none">
					<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                         height="24px" viewBox="0 0 24 24" version="1.1"><g stroke="none" stroke-width="1" fill="none"
                                                                            fill-rule="evenodd"><polygon
                            points="0 0 24 0 24 24 0 24"/><rect fill="#000000" opacity="0.3"
                                                                transform="translate(15.000000, 12.000000) scale(-1, 1) rotate(-90.000000) translate(-15.000000, -12.000000) "
                                                                x="14" y="7" width="2" height="10" rx="1"/><path
                            d="M3.7071045,15.7071045 C3.3165802,16.0976288 2.68341522,16.0976288 2.29289093,15.7071045 C1.90236664,15.3165802 1.90236664,14.6834152 2.29289093,14.2928909 L8.29289093,8.29289093 C8.67146987,7.914312 9.28105631,7.90106637 9.67572234,8.26284357 L15.6757223,13.7628436 C16.0828413,14.136036 16.1103443,14.7686034 15.7371519,15.1757223 C15.3639594,15.5828413 14.7313921,15.6103443 14.3242731,15.2371519 L9.03007346,10.3841355 L3.7071045,15.7071045 Z"
                            fill="#000000" fill-rule="nonzero"
                            transform="translate(9.000001, 11.999997) scale(-1, -1) rotate(90.000000) translate(-9.000001, -11.999997) "/></g></svg>
				</span>
        </div>
        <div class="fixed-content-body dz-scroll" id="DZ_W_Fixed_Contant">
            <div class="tab-content" id="menu">
                <div class="tab-pane chart-sidebar fade" id="dashboard-area" role="tabpanel"></div>

                <div class="tab-pane fade active show" id="apps">
                    <ul class="metismenu tab-nav-menu">
                        <ul aria-expanded="false">
                            <li class="nav-label">Основное</li>
                            <li class="active show"><a class="has-arrow" href="javascript:void()" aria-expanded="false">Контр
                                агент</a>
                                <ul aria-expanded="false" class="active show">
                                    <li class="active show"><a href="{% url 'counter_party' %}">Контр агенты</a></li>
                                </ul>
                            </li>
                            <li><a href="{% url 'order' %}" aria-expanded="false">Заказы</a>
                            </li>
                            <li><a class="has-arrow" href="javascript:void()" aria-expanded="false">Отчеты</a>
                                <ul aria-expanded="false">
                                    <li><a href="{% url 'report-outcome' %}">Отчеты расходов</a></li>
                                </ul>
                                <ul aria-expanded="false">
                                    <li><a href="{% url 'report_income' %}">Отчеты доходов</a></li>
                                </ul>
                            </li>
                            <li><a href="{% url 'product' %}">Продукты</a></li>
                            <li><a href="{% url 'product_report' %}">Отчет по продуктам</a></li>
                        </ul>
                    </ul>
                </div>
                <div class="tab-pane fade" id="dashboard" role="tabpanel">
                    <ul class="metismenu tab-nav-menu">
                        <li class="nav-label">Настройки</li>
                        <li>
                            <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                     width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <rect x="0" y="0" width="24" height="24"/>
                                        <rect fill="#000000" x="4" y="4" width="7" height="7" rx="1.5"/>
                                        <path d="M5.5,13 L9.5,13 C10.3284271,13 11,13.6715729 11,14.5 L11,18.5 C11,19.3284271 10.3284271,20 9.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,14.5 C4,13.6715729 4.67157288,13 5.5,13 Z M14.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,9.5 C20,10.3284271 19.3284271,11 18.5,11 L14.5,11 C13.6715729,11 13,10.3284271 13,9.5 L13,5.5 C13,4.67157288 13.6715729,4 14.5,4 Z M14.5,13 L18.5,13 C19.3284271,13 20,13.6715729 20,14.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L14.5,20 C13.6715729,20 13,19.3284271 13,18.5 L13,14.5 C13,13.6715729 13.6715729,13 14.5,13 Z"
                                              fill="#000000" opacity="0.3"/>
                                    </g>
                                </svg>
                                Соотрудники
                            </a>
                            <ul aria-expanded="false">
                                <li><a href="{% url 'workers' %}">Соотрудники</a></li>
                                <li><a href="{% url 'cars' %}">Машины соотрудников</a></li>
                            </ul>
                        </li>

                        <li>
                            <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                     width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <rect x="0" y="0" width="24" height="24"/>
                                        <rect fill="#000000" x="4" y="4" width="7" height="7" rx="1.5"/>
                                        <path d="M5.5,13 L9.5,13 C10.3284271,13 11,13.6715729 11,14.5 L11,18.5 C11,19.3284271 10.3284271,20 9.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,14.5 C4,13.6715729 4.67157288,13 5.5,13 Z M14.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,9.5 C20,10.3284271 19.3284271,11 18.5,11 L14.5,11 C13.6715729,11 13,10.3284271 13,9.5 L13,5.5 C13,4.67157288 13.6715729,4 14.5,4 Z M14.5,13 L18.5,13 C19.3284271,13 20,13.6715729 20,14.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L14.5,20 C13.6715729,20 13,19.3284271 13,18.5 L13,14.5 C13,13.6715729 13.6715729,13 14.5,13 Z"
                                              fill="#000000" opacity="0.3"/>
                                    </g>
                                </svg>
                                Расходы
                            </a>
                            <ul aria-expanded="false">
                                <li><a href="{% url 'outlay_cat' %}">Категория расходов</a></li>
                                <li><a href="{% url 'outlay' %}">Добавить расход</a></li>
                                <li><a href="{% url 'return_outlay' %}">Добавить возврат расхода</a></li>
                            </ul>
                        </li>
                        <li><a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                 width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24"/>
                                    <rect fill="#000000" x="4" y="4" width="7" height="7" rx="1.5"/>
                                    <path d="M5.5,13 L9.5,13 C10.3284271,13 11,13.6715729 11,14.5 L11,18.5 C11,19.3284271 10.3284271,20 9.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,14.5 C4,13.6715729 4.67157288,13 5.5,13 Z M14.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,9.5 C20,10.3284271 19.3284271,11 18.5,11 L14.5,11 C13.6715729,11 13,10.3284271 13,9.5 L13,5.5 C13,4.67157288 13.6715729,4 14.5,4 Z M14.5,13 L18.5,13 C19.3284271,13 20,13.6715729 20,14.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L14.5,20 C13.6715729,20 13,19.3284271 13,18.5 L13,14.5 C13,13.6715729 13.6715729,13 14.5,13 Z"
                                          fill="#000000" opacity="0.3"/>
                                </g>
                            </svg>
                            Приходы
                        </a>
                            <ul aria-expanded="false">
                                <li><a href="{% url 'income_list' %}">Приходы</a></li>
                            </ul>
                        </li>
                        <li><a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                 width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24"/>
                                    <rect fill="#000000" x="4" y="4" width="7" height="7" rx="1.5"/>
                                    <path d="M5.5,13 L9.5,13 C10.3284271,13 11,13.6715729 11,14.5 L11,18.5 C11,19.3284271 10.3284271,20 9.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,14.5 C4,13.6715729 4.67157288,13 5.5,13 Z M14.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,9.5 C20,10.3284271 19.3284271,11 18.5,11 L14.5,11 C13.6715729,11 13,10.3284271 13,9.5 L13,5.5 C13,4.67157288 13.6715729,4 14.5,4 Z M14.5,13 L18.5,13 C19.3284271,13 20,13.6715729 20,14.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L14.5,20 C13.6715729,20 13,19.3284271 13,18.5 L13,14.5 C13,13.6715729 13.6715729,13 14.5,13 Z"
                                          fill="#000000" opacity="0.3"/>
                                </g>
                            </svg>
                            Склад
                        </a>
                            <ul aria-expanded="false">
                                <li><a href="{% url 'warehouse_list' %}">Склад</a></li>
                                <li><a href="{% url 'income_list' %}">Приходы</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!--**********************************
        Sidebar End
    ***********************************-->


    <!--**********************************
        Header start
    ***********************************-->
    <div class="header">
        <div class="header-content">
            <nav class="navbar navbar-expand">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03"
                        aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-between">
                    <div class="col-md-8 d-flex">

                        <div class="row cashier_balance_list justify-content-between">
                            {% if request.user.is_superuser  or request.user.user_type == 'admin' %}
                                {% for cashier in cashiers %}
                                    {% if cashier.payment_type == 'usd' %}
                                        <div class="col-md-2 ml-1">
                                            <div class="row" id="rate_area_{{ cashier.pk }}">
                                            <span class="badge badge-primary badge-lg  text-white">Баланс: <span
                                                    id="balance_value_1">{{ cashier.amount|remove_zero }} $</span></span>
                                            </div>
                                        </div>
                                    {% elif cashier.payment_type == 'uzs' %}
                                        <div class="col-md-2 mr-5">
                                            <div class="row" id="rate_area_{{ cashier.pk }}">
                                            <span class="badge badge-primary badge-lg  text-white">Баланс: <span
                                                    id="balance_value_2">{{ cashier.amount|remove_zero }} Сум</span></span>
                                            </div>
                                        </div>
                                    {% elif cashier.payment_type == 'bank' %}
                                        <div class="col-md-2 mr-5">
                                            <div class="row" id="rate_area_{{ cashier.pk }}">
                                            <span class="badge badge-primary badge-lg  text-white">Баланс: <span
                                                    id="balance_value_3">{{ cashier.amount|remove_zero }} Банк</span></span>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="row">
                                                <div class="col-md-12" id="rate_span">
                                                    <span class="badge badge-primary badge-lg  text-white mr-5">Курс доллара: <span
                                                            id="rate_area">{{ ps }}</span></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 px-0">
                                            {% if request.user.is_superuser or request.user.user_type == 'admin' %}
                                                <a class="btn btn-primary btn-sm sharp text-white" data-toggle="modal"
                                                   data-target="#rateModal"><i class="fa fa-pencil mt-1"></i></a>
                                                <a class="btn btn-warning btn-sm sharp text-white" data-toggle="modal"
                                                   data-target="#ConversionFirmModal"><i
                                                        class="fa fa-money mt-1"></i></a>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <ul class="navbar-nav header-right">
                        {#                        <li class="nav-item dropdown notification_dropdown">#}
                        {#                            <a class="nav-link bell dz-fullscreen" href="#">#}
                        {#                                <svg id="icon-full" viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"#}
                        {#                                     stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"#}
                        {#                                     class="css-i6dzq1">#}
                        {#                                    <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>#}
                        {#                                </svg>#}
                        {#                                <svg id="icon-minimize" width="20" height="20" viewBox="0 0 24 24" fill="none"#}
                        {#                                     stroke="currentColor" stroke-width="2" stroke-linecap="round"#}
                        {#                                     stroke-linejoin="round" class="feather feather-minimize">#}
                        {#                                    <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>#}
                        {#                                </svg>#}
                        {#                            </a>#}
                        {#                        </li>#}
                        {#                        <li class="nav-item dropdown notification_dropdown">#}
                        {#                            <a class="nav-link bell ai-icon" href="#" role="button" data-toggle="dropdown">#}
                        {#                                <svg id="icon-user" xmlns="http://www.w3.org/2000/svg" width="20" height="20"#}
                        {#                                     viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"#}
                        {#                                     stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell">#}
                        {#                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>#}
                        {#                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>#}
                        {#                                </svg>#}
                        {#                                <div class="pulse-css"></div>#}
                        {#                            </a>#}
                        {#                        </li>#}
                        <li class="nav-item dropdown header-profile">
                            <a class="nav-link" href="#" role="button" data-toggle="dropdown">
                                <img src="{% static 'images/profile/user3.jpg' %}" width="20" alt=""/>
                                <div class="header-info">
                                    <span><strong>{{ request.user }}</strong></span>
                                    <small>Business Profile</small>
                                </div>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a href="{% url 'logout' %}" class="dropdown-item ai-icon">
                                    <svg id="icon-logout" xmlns="http://www.w3.org/2000/svg" class="text-danger"
                                         width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                         stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                        <polyline points="16 17 21 12 16 7"></polyline>
                                        <line x1="21" y1="12" x2="9" y2="12"></line>
                                    </svg>
                                    <span class="ml-2">Logout </span>
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <!--**********************************
        Header end ti-comment-alt
    ***********************************-->

    <!--**********************************
        Sidebar start
    ***********************************-->
    <div class="deznav">
        <div class="deznav-scroll">
            <ul class="nav menu-tabs">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#apps">
                        <svg id="icon-apps" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round" stroke-linejoin="round" class="feather feather-users">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#dashboard" class="active">
                        <svg id="icon-home1" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round" stroke-linejoin="round" class="feather feather-home">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                    </a>
                </li>
                {#					<li class="nav-item">#}
                {#						<a class="nav-link" data-toggle="tab" href="#components">#}
                {#							<svg id="icon-bootstrap" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>#}
                {#						</a>#}
                {#					</li>#}
                {#					<li class="nav-item">#}
                {#						<a class="nav-link" data-toggle="tab" href="#forms">#}
                {#							<svg id="icon-forms" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" style="stroke-dasharray: 66, 86; stroke-dashoffset: 0;"></path><path d="M14,2L14,8L20,8" style="stroke-dasharray: 12, 32; stroke-dashoffset: 0;"></path><path d="M16,13L8,13" style="stroke-dasharray: 8, 28; stroke-dashoffset: 0;"></path><path d="M16,17L8,17" style="stroke-dasharray: 8, 28; stroke-dashoffset: 2;"></path><path d="M10,9L9,9L8,9" style="stroke-dasharray: 2, 22; stroke-dashoffset: 12;"></path></svg>#}
                {#						</a>#}
                {#					</li>#}
                {#					<li class="nav-item">#}
                {#						<a class="nav-link" data-toggle="tab" href="#table">#}
                {#							<svg id="icon-table" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-server"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6" y2="6"></line><line x1="6" y1="18" x2="6" y2="18"></line></svg>#}
                {#						</a>#}
                {#					</li>#}
                {#					<li class="nav-item">#}
                {#						<a class="nav-link" data-toggle="tab" href="#extra">#}
                {#							<svg id="icon-pages" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-grid"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>#}
                {#						</a>#}
                {#					</li>#}

            </ul>
        </div>
        <a href="{% url 'logout' %}" class="logout-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 class="feather feather-log-out">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
        </a>
    </div>
    <!--**********************************
        Sidebar end
    ***********************************-->

    <!--**********************************
        Content body start
    ***********************************-->
    <div class="content-body">
        <!-- row -->
        {% block content %}

        {% endblock %}
    </div>
    <!--**********************************
        Content body end
    ***********************************-->

    <!--**********************************
        Footer start
    ***********************************-->
    <!--**********************************
        Footer end
    ***********************************-->

    <!--**********************************
       Support ticket button start
    ***********************************-->

    <!--**********************************
       Support ticket button end
    ***********************************-->


    <div class="modal fade" id="rateModal" tabindex="12"
         aria-labelledby="rateModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    Изменить курс доллара
                </div>
                <div class="modal-body">
                    <form id="change_rate_form" action="{% url 'other_action' %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="change_rate">
                        <label for="id_rate">Новый курс доллара</label>
                        <input id="id_rate" name="rate" class="form-control" required min="1"
                               type="number">
                        <button type="button" onclick="change_rate(
                                                {
                                                'action': 'change_rate',
                                                'rate': $('#id_rate').val()
                                                }
                                                )"
                                class="btn btn-primary mt-4 float-right">Сохранить
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ConversionFirmModal" tabindex="-1" aria-labelledby="ConversionFirmModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                {#                    <h5 class="modal-title" id="ConversionFirmModalLabel">Пополнение баланса {{ selected_agent.name }}</h5>#}
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table class="table table-bordered table-sm table-hover table-striped">
                    <tbody>
                    <tr>
                        <td class="">Сум</td>
                        <td class="divide">{{ contr_agent.balance_uzs }}</td>
                    </tr>
                    <tr>
                        <td class="">Доллар</td>
                        <td class="divide">{{ contr_agent.balance_usd }}</td>
                    </tr>
                    </tbody>
                </table>
                <form id="balance_income" method="post" action="{% url 'other_action' %}">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="conversion_balance">
                    {% for form in convert_form %}
                        <div id="id_{{ form.name }}_group" class="col-12">
                            {{ form.label_tag }}
                            {{ form|add_class:'form-control'|attr:'autocomplete:off' }}
                        </div>
                    {% endfor %}
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
                <button type="button" class="btn btn-primary" form="balance_income" onclick="conversion_balance(
                                                                                            {
                                                                                            'action': 'conversion_balance',
                                                                                            'cashiers': $('#id_cashiers').val(),
                                                                                            'cashiers_second': $('#id_cashiers_second').val(),
                                                                                            'amount': $('#id_amount').val(),
                                                                                            'amount_second': $('#id_amount_second').val(),
                                                                                            'comment': $('#id_comment').val(),
                                                                                            })">Конвертация
                </button>
            </div>
        </div>
    </div>
</div>

    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    <!-- Required vendors -->
    <script>
        async function conversion_balance(data, url = '{% url 'other_action' %}') {
            let form_data = new FormData();
            for (var key in data) {
                form_data.append(key, data[key]);
            }
            const response = await fetch(url, {
                method: "post",
                cache: 'no-cache',
                body: form_data
            })
                .then(response => {
                    return response.json();
                })
                .then((response_data) => {
                    console.log(response_data);
                    if (`${response_data['cashier_type_first']}` === 'uzs') {
                        let cashier_sum = parseInt(`${response_data['amount_first']}`) - parseInt(document.getElementById('balance_value_2').textContent.replace(/\D+/g, ''))
                        $(`#balance_value_2`).text(cashier_sum.toString().slice(1).replace(/\B(?=(\d{3})+(?!\d))/g, " ") + ' Сум ')
                    } else if (`${response_data['cashier_type_first']}` === 'usd') {
                        let cashier_dollar = parseInt(`${response_data['amount_first']}`) - parseInt(document.getElementById('balance_value_1').textContent.replace(/\D+/g, ''))
                        $(`#balance_value_1`).text(cashier_dollar.toString().slice(1).replace(/\B(?=(\d{3})+(?!\d))/g, " ") + ' $ ')
                    } else if (`${response_data['cashier_type_first']}` === 'bank') {
                        let cashier_bank = parseInt(`${response_data['amount_first']}`) - parseInt(document.getElementById('balance_value_3').textContent.replace(/\D+/g, ''))
                        $(`#balance_value_3`).text(cashier_bank.toString().slice(1).replace(/\B(?=(\d{3})+(?!\d))/g, " ") + ' Банк ')
                    }

                    if (`${response_data['cashier_type_second']}` === 'uzs') {
                        let cashier_sum = parseInt(`${response_data['amount_second']}`) + parseInt(document.getElementById('balance_value_2').textContent.replace(/\D+/g, ''))
                        $(`#balance_value_2`).text(cashier_sum.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + ' Сум ')
                    } else if (`${response_data['cashier_type_second']}` === 'usd') {
                        let cashier_dollar = parseInt(`${response_data['amount_second']}`) + parseInt(document.getElementById('balance_value_1').textContent.replace(/\D+/g, ''))
                        $(`#balance_value_1`).text(cashier_dollar.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + ' $ ')
                    } else if (`${response_data['cashier_type_second']}` === 'bank') {
                        let cashier_bank = parseInt(`${response_data['amount_second']}`) + parseInt(document.getElementById('balance_value_3').textContent.replace(/\D+/g, ''))
                        $(`#balance_value_3`).text(cashier_bank.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + ' Банк ')
                    }
                    $(`#ConversionFirmModal`).modal('toggle')
                })
                .catch(response => {
                    alert('Error')
                })
        }

        async function change_rate(data, url = '{% url 'other_action' %}') {
            let form_data = new FormData();
            for (var key in data) {
                form_data.append(key, data[key]);
            }
            const response = await fetch(url, {
                method: "post",
                cache: 'no-cache',
                body: form_data
            })
                .then(response => {
                    return response.json();
                })
                .then((response_data) => {
                    console.log(response_data);
                    $(`#rateModal`).modal('toggle')
                    $(`#rate_area`).text(`${response_data['rate']}`)
                })
                .catch(response => {
                    alert('Error')
                })
        }

    </script>
    <script src="{% static 'vendor/global/global.min.js' %}"></script>
    <script src="{% static 'vendor/chart.js/Chart.bundle.min.js' %}"></script>
    <script src="{% static 'js/custom.min.js' %}"></script>
    <script src="{% static 'js/deznav-init.js' %}"></script>
    <!-- Apex Chart -->
    <script src="{% static 'vendor/apexchart/apexchart.js' %}"></script>

    <!-- Vectormap -->
    <!-- Chart piety plugin files -->
    <script src="{% static 'vendor/peity/jquery.peity.min.js' %}"></script>

    <!-- Chartist -->
    <script src="{% static 'vendor/chartist/js/chartist.min.js' %}"></script>

    <!-- Dashboard 1 -->
    <script src="{% static 'js/dashboard/dashboard-1.js' %}"></script>
    <!-- Svganimation scripts -->
    <script src="{% static 'vendor/svganimation/vivus.min.js' %}"></script>
    <script src="{% static 'vendor/svganimation/svg.animation.js' %}"></script>
    <script src="https://kit.fontawesome.com/b7086954d3.js" crossorigin="anonymous"></script>
    {% block extra_js %}
    {% endblock %}

</body>
</html>